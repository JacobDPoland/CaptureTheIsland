@{
    ViewData["Title"] = "PNG Oddities";
}

<h2 class="mb-4">PNG Oddities</h2>

<p>
    This serene island picture may look ordinary… but appearances can be deceiving.
    Somewhere inside this PNG, a flag is hidden — but not in the visible pixels.
</p>

<!-- DISPLAY THE IMAGE -->
<div class="text-center mb-4">
    <img src="~/images/island.png" alt="Mysterious Island" class="img-fluid rounded border border-secondary" />
</div>

<!-- FLAG SUBMISSION FORM -->
<form asp-action="SubmitPNGOddities" method="post" class="mt-3">
    <div class="mb-3">
        <input name="flag" class="form-control bg-dark text-light border-secondary" placeholder="Enter flag here" />
    </div>
    <button type="submit" class="btn btn-primary">Submit Flag</button>
</form>

<!-- SUCCESS / ERROR FEEDBACK -->
@if (TempData["Message"] != null)
{
    <div class="alert alert-success mt-3">@TempData["Message"]</div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger mt-3">@TempData["Error"]</div>
}

@if (TempData["Success"] != null)
{
    <script>markChallengeComplete("PngOddities");</script>
}

<hr />

<!-- HINT ACCORDION -->
<div class="accordion mt-4" id="hintsAccordion">

    <!-- Hint 1 -->
    <div class="accordion-item bg-dark text-light">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#hint1">
                Need a nudge?
            </button>
        </h2>
        <div id="hint1" class="accordion-collapse collapse">
            <div class="accordion-body">
                The flag is not hidden in the pixels… but in the file itself.
            </div>
        </div>
    </div>

    <!-- Hint 2 -->
    <div class="accordion-item bg-dark text-light mt-2">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#hint2">
                Still stuck?
            </button>
        </h2>
        <div id="hint2" class="accordion-collapse collapse">
            <div class="accordion-body">
                Try checking the file metadata using tools like:
                <pre class="mt-2">exiftool island.png</pre>
                or by dragging the image into an online metadata viewer.
            </div>
        </div>
    </div>

    <!-- Hint 3 (Full Tutorial) -->
    <div class="accordion-item bg-dark text-light mt-2">
        <h2 class="accordion-header">
            <button class="accordion-button collapsed bg-secondary text-light" type="button" data-bs-toggle="collapse" data-bs-target="#hint3">
                Full walkthrough (only if you really need it)
            </button>
        </h2>
        <div id="hint3" class="accordion-collapse collapse">
            <div class="accordion-body">
                Use this sequence:
                <ol>
                    <li>Download the PNG</li>
                    <li>Open a terminal</li>
                    <li>Run: <code>exiftool island.png</code></li>
                </ol>
                Look for a field named <strong>Comment</strong>.
                Inside it, you’ll find the flag.
            </div>
        </div>
    </div>
</div>

<!-- NAVIGATION -->
<a href="/Challenges/Sample" class="btn btn-secondary mt-4">← Back to Sample Challenges</a>
<a href="/Challenges/PasswordCracking" class="btn btn-outline-info mt-4">
    Next Challenge → Password Cracking
</a>

