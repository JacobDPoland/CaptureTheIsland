@using Microsoft.AspNetCore.Identity
@model CaptureTheIsland.Models.LandingViewModel
@{
    ViewData["Title"] = "Capture The Island";
}

<section id="hero" class="hero">
    <canvas id="title-canvas" aria-hidden="true"></canvas>
    <h1 class="static-title display-3 fw-bold text-center">CAPTURE THE ISLAND</h1>
    <h2 class="subtitle">A Capture-the-Flag (CTF) cybersecurity training site.</h2>
    <div class="mt-3">
        <button id="anim-toggle" class="btn btn-outline-light btn-sm" type="button" aria-pressed="false">
            Disable animations
        </button>
    </div>
</section>

@section Scripts {
    <script src="~/js/shapeshifter-title.js" defer></script>
}

@if (User.Identity.IsAuthenticated)
{
    <div class="text-center mb-4" style="font-size: 1.2rem; color: cyan;">
        üëã Welcome back, <strong>@User.Identity.Name</strong>
    </div>
}


<!-- üî• NEW CHALLENGE INTRO SECTION -->
<hr class="border-secondary my-5" />

<div class="text-center mt-5 pb-5">

    <h2 class="mb-3" style="color: #0dcaf0; font-weight:600;">
        Think you're ready? Let's find out.
    </h2>

    <p class="text-light mb-4">
        It is highly recommended to practice cybersecurity challenges using <strong>Kali Linux</strong>.
        Many tools used in real CTFs are pre-installed and ready to go.
        <br /><br />
        ‚û§ New to Kali? Learn how to install it on VirtualBox:<br />
        <a href="https://www.kali.org/docs/virtualization/install-virtualbox-guest-vm/"
           class="text-info" target="_blank">
            Click here to begin
        </a>
    </p>

    <a href="/Challenges" class="btn btn-lg btn-outline-info px-5 py-3"
       style="font-size:1.4rem; border-width:2px; border-radius:12px;">
        üö© Enter the Challenges
    </a>

</div>


<section class="mb-5">
    <h2 class="h3 mb-3">What is a CTF?</h2>
    <p>
        A <strong>Capture-the-Flag (CTF)</strong> is a hands-on cybersecurity competition where participants solve
        practical challenges to uncover hidden ‚Äúflags.‚Äù CTFs simulate real-world analyst and penetration-testing tasks,
        encouraging problem-solving, methodical investigation, and safe experimentation.
    </p>
</section>

<section class="mb-5">
    <h2 class="h3 mb-3">Skills You‚Äôll Practice</h2>
    <ul class="row row-cols-1 row-cols-md-2 g-2 list-unstyled">
        <li class="col">‚Ä¢ Password cracking & hash analysis</li>
        <li class="col">‚Ä¢ Log analysis & incident triage</li>
        <li class="col">‚Ä¢ Cryptography basics & cipher tools</li>
        <li class="col">‚Ä¢ Forensics (files, memory, metadata)</li>
        <li class="col">‚Ä¢ OSINT (Open-Source Intelligence)</li>
        <li class="col">‚Ä¢ Networking & protocols (HTTP, DNS, PCAPs)</li>
        <li class="col">‚Ä¢ Scripting & automation (Python, bash)</li>
    </ul>
</section>

<section class="mb-5">
    <h2 class="h3 mb-3">Modules Offered</h2>
    <div class="table-responsive">
        <table class="table table-dark table-striped table-bordered align-middle">
            <thead>
                <tr>
                    <th scope="col">Module</th>
                    <th scope="col">What You‚Äôll Do</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var m in Model.Modules)
                {
                    <tr><td>@m.Name</td><td>@m.Description</td></tr>
                }
            </tbody>
        </table>
    </div>
</section>

<section id="challenges" class="mb-5">
    <h2 class="h3 mb-3">Sample Challenges</h2>
    <div class="table-responsive">
        <table class="table table-dark table-striped table-bordered align-middle">
            <thead><tr><th>Title</th><th>Type</th><th>Difficulty</th></tr></thead>
            <tbody>
                @foreach (var c in Model.Challenges)
                {
                    <tr><td>@c.Title</td><td>@c.Type</td><td>@c.Difficulty</td></tr>
                }
            </tbody>
        </table>
    </div>
</section>

@if (Model.Resources != null && Model.Resources.Any())
{
    <section class="mb-5">
        <h2 class="h3 mb-3 text-light">Resources</h2>

    @* Only administrators should be able to create new resources.  Wrap the
       "Add New Resource" button in a role check so that it is hidden from
       regular users. *@
    @if (User.IsInRole("Admin"))
    {
        <a asp-controller="Resource" asp-action="Add" class="btn btn-outline-info mb-3">
            Add New Resource
        </a>
    }

        <div class="table-responsive">
            <table class="table table-dark table-striped table-bordered align-middle">
                <thead>
                    <tr>
                        <th scope="col">Resource</th>
                        <th scope="col">Link</th>
                        <th scope="col">Description</th>
                        @if (User.IsInRole("Admin"))
                        {
                            <th scope="col" style="width: 120px;">Actions</th>
                        }
                    </tr>
                </thead>
                <tbody>
                    @foreach (var res in Model.Resources)
                    {
                        <tr>
                            <td>@res.Name</td>

                            <td>
                                <a href="@res.Link" class="text-info" target="_blank">
                                    @res.Link
                                </a>
                            </td>

                            <td>@res.Description</td>

                        
                            @* Wrap the edit/delete buttons in a role check.  These
                               administrative actions should only be visible to
                               administrators.  If the user is not an admin,
                               display an empty cell to maintain table layout. *@
                            @if (User.IsInRole("Admin"))
                            {
                                <td class="text-center">
                                    <div class="d-flex gap-2 justify-content-center">
                                        <a asp-controller="Resource"
                                           asp-action="Edit"
                                           asp-route-id="@res.ResourceId"
                                           asp-route-slug="@res.Slug"
                                           class="btn btn-sm btn-outline-warning">
                                            Edit
                                        </a>

                                        <a asp-controller="Resource"
                                           asp-action="Delete"
                                           asp-route-id="@res.ResourceId"
                                           asp-route-slug="@res.Slug"
                                           class="btn btn-sm btn-outline-danger">
                                            Delete
                                        </a>
                                    </div>
                                </td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </section>
}
